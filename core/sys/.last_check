<?php

$core_check_file = __DIR__ . '/core/sys/.last_check';

function shouldRunCheck($intervalSeconds = 3600) {
    global $core_check_file;
    if (!file_exists($core_check_file)) {
        return true;
    }

    $last = (int)file_get_contents($core_check_file);
    $now = time();
    if (($now - $last) > $intervalSeconds) {
        return true;
    }
    return false;
}

function updateCheckTime() {
    global $core_check_file;
    file_put_contents($core_check_file, time());
}

// استفاده در برنامه

if (shouldRunCheck(3600)) { // هر 1 ساعت
    // اجرای چک‌های سنگین
    updateCheckTime();
}
